---
name: "Jenna A. P."
surname: "Hamlin"
position: "Health Scientist - Informatics"
email: "jennahamlin@gmail.com"
github: jennahamlin
aboutme: "I am a scientist with over 10 years of experience in bioinformatics, genomics, and classical genetics. My training includes a broad set of skills and approaches including programming and experimental design to evolutionary biology and species distribution modeling. Currently, I work at the intersection of public health (ph), ph tool development, and the study of pathogens, with a focus on reproducible research."
date: "`r format(Sys.time(), '%B %Y')`"
headcolor: 414141
output: vitae::awesomecv
latex_engine: xelatex
knit: (function(inputFile, encoding){
  rmarkdown::render(inputFile, encoding = encoding,
  output_dir = here::here("output"), output_format = "all") })
--- 

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)

library(vitae)
library(here)
library(magrittr)
library(glue)
```

```{r get data, include=FALSE}
## Load in data files
## Education
edu <- readr::read_csv(here::here("data", "education.csv"))

## Work Experience
work <- readr::read_csv(here::here("data", "appointments.csv"))

## Skills
 skills <- readr::read_csv(here::here("data", "skillsUpdated.csv")) %>% 
   dplyr::group_by(category) %>% 
   dplyr::mutate(skill = paste(skill, collapse = ", ")) %>% 
   dplyr::ungroup()%>% 
   unique
 
## Publications - my google id here
shorten_journal_names <- function(journal_names) {
  if (!requireNamespace("journalabbr", quietly = TRUE)) {
    stop("Please install the 'journalabbr' package: install.packages('journalabbr')")
  }
  if (!requireNamespace("dplyr", quietly = TRUE)) {
    stop("Please install the 'dplyr' package: install.packages('dplyr')")
  }

  abbr_table <- journalabbr:::abbrtable_sys

  # create input dataframe
  input_df <- data.frame(journal_original = journal_names, stringsAsFactors = FALSE) %>%
    dplyr::mutate(journal_lower = tolower(journal_original))

  # Prepare abbreviation table: it already has journal_lower and journal_abbr
  abbr_df <- abbr_table %>%
    dplyr::select(journal_lower, journal_abbr) %>%
    # itâ€™s good practice to ensure lowercase matching
    dplyr::mutate(journal_lower = tolower(journal_lower))

  # Join
  joined <- dplyr::left_join(input_df, abbr_df, by = "journal_lower")

  # Fallback: where no abbreviation is found
  result <- ifelse(
    is.na(joined$journal_abbr),
    joined$journal_original,
    joined$journal_abbr
  )

  return(result)
}

 pubs <- scholar::get_publications("OIIf5T4AAAAJ&hl") %>%
  dplyr::mutate(
    author = author %>% as.character() %>% stringr::str_trim(),
    first_author = dplyr::case_when(stringr::str_starts(author, "JAP Hamlin") ~ TRUE, TRUE ~ FALSE),
    preprint = dplyr::case_when(journal %in% c("bioRxiv", "BioRxiv") ~ TRUE, TRUE ~ FALSE) ) %>%
  filter(journal != "University of Georgia" & journal != "Bulletin of the Ecological Society of America") %>%
  arrange(desc(year)) %>%
  mutate(journal_short = shorten_journal_names(journal))
 
pubs$journal_short <-plyr::revalue(pubs$journal_short,c("G" = "G3")) #corrects G to G3
pubs$journal_short[grep("Reticulate Evolution", pubs$journal_short)] <- "Reticulate Evolution"
pubs$journal_short <-plyr::revalue(pubs$journal_short,c("Rapidly evolving genes and genetic systems" = "Rapidly Evol. Genes Genet. Syst.")) 

```

# Education

```{r education}
vitae::detailed_entries(edu, 
                 when = awarded,
                 what = degree,
                 where = loc,
                 with = uni)
```

# Work Experience

```{r work}

work %>% 
  vitae::detailed_entries(
    what = role,
    when = glue("{start_date}--{end_date}"),
    with = company,
    where = where,
    why = details)

```

# Skills

```{r skills}
skills %>% 
  vitae::detailed_entries(what = skill, with = category)
```

# Publications

```{r publications}
pubs %>%
  dplyr::filter(!preprint) %>%
  vitae::detailed_entries(
    what = title,
    when = year,
    with = author,
    where = journal_short,
    .protect = TRUE
  )
```

